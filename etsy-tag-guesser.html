<head>
  <title>etsy-tag-guesser</title>
</head>

<body>
  {{> container}}
</body>
<template name="container">
  <div class='body-container'>
    {{> hello}}
  </div>
</template>
<template name="hello">
  <div>you are: {{userId}}</div>
  <div>opponent: {{opponentUserId}}</div>
  <div>
    {{#unless gameId}}
      {{#if empty myOpenGames}}
      <button class='create-and-join-game'>Advertise yourself</button>
      {{/if}}
    {{/unless}}
    {{#if gameId}}
      Game ID: {{gameId}}
      {{#if empty curGame}}(waiting for opponent){{/if}}
      <button class='leave-game'>leave</button>
    {{/if}}
  </div>
  {{#if gameId}}
  <div id='game-cube' class='{{playMode}}'>
    <div class='tag'>{{tag}}</div>
    <h2>Images for your tag that have been sent to your opponent:</h2>
    <div class='block-of-images my-side'>
      {{#each myTiles}}
        <div class='tile'>
          <img class='tile-image' src="{{image.url_170x135}}">
          <div class='description'><a href='{{listing.url}}' target="_blank">{{{listing.title}}}</a></div>
        </div>
      {{/each}}
      <div class='tag-input-holder'>
        <input placeholder="challenge tag" type="text" id="tag-input">
      </div>
    </div>
    <h2>Challenge images from your opponent's tag.</h2>
    <div class='block-of-images opponent-side'>
      {{#each opponentTiles}}
        <div class='tile'>
          <img class='tile-image' src="{{image.url_170x135}}">
          <div class='description'><a href='{{listing.url}}' target="_blank">{{{listing.title}}}</a></div>
        </div>
      {{/each}}
      <div class='tag-input-holder'>
          <input placeholder="challenge tag" type="text" id="tag-input" class='your-guess'>
          <button class='give-up'>give up?</button>
        </div>
    </div>
  </div>
  {{/if}}
  {{#unless gameId}}
    {{#if openGames}}
    Games you can join:
    <ul>
      {{#each openGames}}
      <li>{{_id}} (created {{created}}) ({{players.length}} players)<button class='join-game'>join</button></li>
      {{/each}}
    </ul>
    {{/if}}
    {{#if empty openGames}}
      no open games
    {{/if}}
  {{/unless}}
</template>
